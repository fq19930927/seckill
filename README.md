# seckill
java高并发秒杀api
Mysql:事务+行级锁

MySQL 5.5版本需要把create_time字段放在start_time和end_time前面 

dao层工作演变为:接口设计+sql编写

当抛出运行期异常时,声明式事务会回滚

cdn(内容分发网络):加速用户获取数据的系统,部署在离用户最近的网络节点上,命中cdn后不需要访问后端服务器

//优化思路:把客户端逻辑放到mysql服务端,避免网络延迟和GC影响

//两种解决方案
1.定制sql方案,update/*+[auto_commit]*/需要修改sql源码
2.使用存储过程,整个事务在mysql端完成

//优化总结
前端控制:暴露接口,按钮防重复
动静态分离:cdn缓存,后端缓存(redis)
事务竞争减少,减少事务锁时间



存储过程:
1.存储过程优化:事务行级锁持有的时间
2.不要过度依赖存储过程
3.简单的逻辑依赖存储过程
4.QPS:一个秒杀6000/qps

